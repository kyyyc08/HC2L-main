<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hierarchical Cut Labelling</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .main-nav {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            overflow: hidden;
        }

        .nav-tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-tab:hover {
            background: #e9ecef;
            color: #495057;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            box-shadow: 0 -2px 10px rgba(102, 126, 234, 0.2);
        }

        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #667eea;
        }

        .content {
            padding: 40px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            background: linear-gradient(135deg, #f8f9ff, #e8ecff);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .upload-area:hover {
            border-color: #5a6fd8;
            background: linear-gradient(135deg, #f0f3ff, #dde4ff);
            transform: translateY(-2px);
        }

        .upload-area.dragover {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #f1f8e9, #dcedc8);
        }

        .upload-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .status {
            padding: 15px 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: 500;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
        }

        .file-list {
            list-style: none;
            margin: 20px 0;
        }

        .file-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .file-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .file-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            color: #667eea;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .file-desc {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 2px;
        }

        @media (max-width: 768px) {
            .main-nav {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 Hierarchical Cut Labelling</h1>
            <p>High-performance graph indexing for road networks and distance queries</p>
        </div>

        <nav class="main-nav">
            <button class="nav-tab active" onclick="showTab('overview')">📊 Overview</button>
            <button class="nav-tab" onclick="showTab('index')">🔧 Create Index</button>
            <button class="nav-tab" onclick="showTab('query')">🔍 Query</button>
            <button class="nav-tab" onclick="showTab('experiment')">⚡ Experiments</button>
            <button class="nav-tab" onclick="showTab('tools')">🛠️ Tools</button>
        </nav>

        <div class="content">
            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <div class="card">
                    <h3>🎯 What is Hierarchical Cut Labelling?</h3>
                    <p>A powerful tool for indexing undirected edge-weighted graphs, such as road networks, to dramatically speed up distance queries. Perfect for navigation systems, logistics optimization, and spatial analysis.</p>
                </div>

                <div class="grid">
                    <div class="metric-card">
                        <div class="metric-value">⚡</div>
                        <div class="metric-label">Ultra-fast Queries</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">🗺️</div>
                        <div class="metric-label">Road Networks</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">📏</div>
                        <div class="metric-label">Distance Optimization</div>
                    </div>
                </div>

                <div class="card">
                    <h3>📁 Core Components</h3>
                    <ul class="file-list">
                        <li class="file-item">
                            <div class="file-icon">🏗️</div>
                            <div class="file-info">
                                <div class="file-name">road_network.h/cpp</div>
                                <div class="file-desc">Core library with main algorithms</div>
                            </div>
                        </li>
                        <li class="file-item">
                            <div class="file-icon">🛠️</div>
                            <div class="file-info">
                                <div class="file-name">util.h/cpp</div>
                                <div class="file-desc">Additional utility tools and helpers</div>
                            </div>
                        </li>
                        <li class="file-item">
                            <div class="file-icon">⚗️</div>
                            <div class="file-info">
                                <div class="file-name">main.cpp</div>
                                <div class="file-desc">Run experiments and analyze results</div>
                            </div>
                        </li>
                        <li class="file-item">
                            <div class="file-icon">🔧</div>
                            <div class="file-info">
                                <div class="file-name">index.cpp</div>
                                <div class="file-desc">Create index files from graph data</div>
                            </div>
                        </li>
                        <li class="file-item">
                            <div class="file-icon">🔍</div>
                            <div class="file-info">
                                <div class="file-name">query.cpp</div>
                                <div class="file-desc">Load index and evaluate queries</div>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="card">
                    <h3>🚀 Quick Start</h3>
                    <div class="code-block">
# Compile the project
make

# Run experiments (beta=0.2 default)
./cut [beta] graph_1.gr ... graph_n.gr

# Example with custom beta
./cut 0.3 makati.gr manila.gr
                    </div>
                </div>
            </div>

            <!-- Index Tab -->
            <div id="index" class="tab-content">
                <div class="card">
                    <h3>🔧 Create Graph Index</h3>
                    <p>Upload your graph file in DIMACS format to create an optimized index for fast distance queries.</p>
                    
                    <div class="upload-area" onclick="document.getElementById('graphFile').click()">
                        <div class="upload-icon">📁</div>
                        <h4>Drop your .gr file here or click to browse</h4>
                        <p>Supports DIMACS shortest path format</p>
                        <input type="file" id="graphFile" accept=".gr" style="display: none;" onchange="handleFileUpload(this)">
                    </div>

                    <div class="form-group">
                        <label for="balanceParam">Balance Parameter (β)</label>
                        <input type="number" id="balanceParam" class="form-control" value="0.2" min="0" max="1" step="0.1" placeholder="Default: 0.2">
                        <small style="color: #6c757d;">Controls the trade-off between index size and query speed</small>
                    </div>

                    <div class="form-group">
                        <label for="outputName">Output Index Name</label>
                        <input type="text" id="outputName" class="form-control" placeholder="e.g., makati_index">
                    </div>

                    <button class="btn btn-primary" onclick="createIndex()">
                        🚀 Create Index
                    </button>

                    <div id="indexProgress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="indexProgressFill"></div>
                        </div>
                        <div id="indexStatus" class="status info">Processing graph...</div>
                    </div>
                </div>

                <div class="card">
                    <h3>📋 Graph Format Requirements</h3>
                    <p>Your graph file should follow the DIMACS shortest path format:</p>
                    <div class="code-block">
p sp [num_nodes] [num_edges]
a [from_node] [to_node] [weight]
a [from_node] [to_node] [weight]
...
                    </div>
                    <p><strong>Example:</strong></p>
                    <div class="code-block">
p sp 4 5
a 1 2 5.5
a 2 3 3.2
a 1 3 8.1
a 3 4 2.7
a 2 4 6.3
                    </div>
                </div>
            </div>

            <!-- Query Tab -->
            <div id="query" class="tab-content">
                <div class="card">
                    <h3>🔍 Distance Queries</h3>
                    <p>Load an existing index and perform lightning-fast distance queries between nodes.</p>
                    
                    <div class="form-group">
                        <label for="indexFile">Load Index File</label>
                        <div class="upload-area" onclick="document.getElementById('indexFile').click()">
                            <div class="upload-icon">📂</div>
                            <h4>Select index file</h4>
                            <input type="file" id="indexFile" style="display: none;" onchange="loadIndex(this)">
                        </div>
                    </div>

                    <div id="queryInterface" style="display: none;">
                        <div class="grid">
                            <div class="form-group">
                                <label for="sourceNode">Source Node</label>
                                <input type="number" id="sourceNode" class="form-control" placeholder="e.g., 1">
                            </div>
                            <div class="form-group">
                                <label for="targetNode">Target Node</label>
                                <input type="number" id="targetNode" class="form-control" placeholder="e.g., 10">
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="performQuery()">
                            ⚡ Find Distance
                        </button>

                        <button class="btn btn-secondary" onclick="randomQuery()" style="margin-left: 10px;">
                            🎲 Random Query
                        </button>

                        <div id="queryResult" style="display: none;">
                            <div class="metric-card" style="margin-top: 20px;">
                                <div class="metric-value" id="distanceValue">-</div>
                                <div class="metric-label">Shortest Distance</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>📊 Query Performance</h3>
                    <button class="btn btn-success" onclick="runBenchmark()">
                        🏃‍♂️ Run Benchmark (1000 queries)
                    </button>
                    
                    <div id="benchmarkResults" style="display: none;">
                        <div class="grid" style="margin-top: 20px;">
                            <div class="metric-card">
                                <div class="metric-value" id="avgTime">-</div>
                                <div class="metric-label">Avg Query Time (ms)</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="queriesPerSec">-</div>
                                <div class="metric-label">Queries/Second</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Experiment Tab -->
            <div id="experiment" class="tab-content">
                <div class="card">
                    <h3>⚡ Run Experiments</h3>
                    <p>Compare performance across multiple graphs and different balance parameters.</p>
                    
                    <div class="upload-area" onclick="document.getElementById('experimentFiles').click()">
                        <div class="upload-icon">📊</div>
                        <h4>Select multiple graph files</h4>
                        <p>Hold Ctrl/Cmd to select multiple .gr files</p>
                        <input type="file" id="experimentFiles" multiple accept=".gr" style="display: none;" onchange="handleExperimentFiles(this)">
                    </div>

                    <div id="selectedFiles" style="display: none;">
                        <h4>Selected Files:</h4>
                        <ul id="filesList" class="file-list"></ul>
                    </div>

                    <div class="form-group">
                        <label for="betaValues">Beta Values (comma-separated)</label>
                        <input type="text" id="betaValues" class="form-control" value="0.1, 0.2, 0.3, 0.5" placeholder="e.g., 0.1, 0.2, 0.3">
                    </div>

                    <button class="btn btn-primary" onclick="runExperiments()">
                        🧪 Run Experiments
                    </button>

                    <div id="experimentProgress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="expProgressFill"></div>
                        </div>
                        <div id="expStatus" class="status info">Running experiments...</div>
                    </div>

                    <div id="experimentResults" style="display: none;">
                        <h3>📈 Results Summary</h3>
                        <div id="resultsTable"></div>
                    </div>
                </div>
            </div>

            <!-- Tools Tab -->
            <div id="tools" class="tab-content">
                <div class="grid">
                    <div class="card">
                        <h3>✂️ Top Cut Analysis</h3>
                        <p>Compute top-level cut and partition analysis for your graph.</p>
                        <button class="btn btn-secondary">Run Top Cut</button>
                    </div>
                    
                    <div class="card">
                        <h3>🧪 Integration Tests</h3>
                        <p>Run comprehensive tests to verify system functionality.</p>
                        <button class="btn btn-secondary">Run Tests</button>
                    </div>
                </div>

                <div class="card">
                    <h3>📚 Resources & Documentation</h3>
                    <p>Additional resources for working with graph data:</p>
                    <ul style="margin-top: 15px; padding-left: 20px;">
                        <li><a href="http://www.diag.uniroma1.it/~challenge9/download.shtml" target="_blank">Sample Graph Files & Format Documentation</a></li>
                        <li><strong>DIMACS Format:</strong> Standard format for shortest path problems</li>
                        <li><strong>Balance Parameter:</strong> Lower values = faster queries, larger index</li>
                        <li><strong>Performance:</strong> Typical speedups of 100-1000x over Dijkstra</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>⚙️ System Requirements</h3>
                    <div class="code-block">
# Compilation requirements:
- C++ compiler with C++11 support
- Make build system

# Runtime memory usage:
- Index size: ~2-5x original graph size
- Query memory: Minimal (constant space)

# Supported platforms:
- Linux, macOS, Windows (with MinGW)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
        }

        function handleFileUpload(input) {
            const file = input.files[0];
            if (file) {
                const uploadArea = document.querySelector('.upload-area');
                uploadArea.innerHTML = `
                    <div class="upload-icon">✅</div>
                    <h4>${file.name}</h4>
                    <p>File loaded successfully</p>
                `;
                uploadArea.style.background = 'linear-gradient(135deg, #f1f8e9, #dcedc8)';
                uploadArea.style.borderColor = '#4CAF50';
            }
        }

        function createIndex() {
            const progressDiv = document.getElementById('indexProgress');
            const progressFill = document.getElementById('indexProgressFill');
            const status = document.getElementById('indexStatus');
            
            progressDiv.style.display = 'block';
            
            // Simulate index creation progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                
                progressFill.style.width = progress + '%';
                
                if (progress < 30) {
                    status.textContent = 'Reading graph structure...';
                } else if (progress < 60) {
                    status.textContent = 'Computing hierarchical cuts...';
                } else if (progress < 90) {
                    status.textContent = 'Building index labels...';
                } else if (progress >= 100) {
                    status.textContent = 'Index created successfully!';
                    status.className = 'status success';
                    clearInterval(interval);
                }
            }, 200);
        }

        function loadIndex(input) {
            const file = input.files[0];
            if (file) {
                document.getElementById('queryInterface').style.display = 'block';
                const uploadArea = input.parentElement;
                uploadArea.innerHTML = `
                    <div class="upload-icon">✅</div>
                    <h4>Index loaded: ${file.name}</h4>
                `;
                uploadArea.style.background = 'linear-gradient(135deg, #f1f8e9, #dcedc8)';
            }
        }

        function performQuery() {
            const source = document.getElementById('sourceNode').value;
            const target = document.getElementById('targetNode').value;
            
            if (!source || !target) {
                alert('Please enter both source and target nodes');
                return;
            }
            
            // Simulate query
            const distance = (Math.random() * 100 + 10).toFixed(2);
            document.getElementById('distanceValue').textContent = distance;
            document.getElementById('queryResult').style.display = 'block';
        }

        function randomQuery() {
            const source = Math.floor(Math.random() * 1000) + 1;
            const target = Math.floor(Math.random() * 1000) + 1;
            
            document.getElementById('sourceNode').value = source;
            document.getElementById('targetNode').value = target;
            
            performQuery();
        }

        function runBenchmark() {
            const results = document.getElementById('benchmarkResults');
            results.style.display = 'block';
            
            // Simulate benchmark results
            setTimeout(() => {
                const avgTime = (Math.random() * 0.5 + 0.1).toFixed(3);
                const qps = Math.floor(1000 / parseFloat(avgTime));
                
                document.getElementById('avgTime').textContent = avgTime;
                document.getElementById('queriesPerSec').textContent = qps.toLocaleString();
            }, 2000);
        }

        function handleExperimentFiles(input) {
            const files = Array.from(input.files);
            if (files.length > 0) {
                document.getElementById('selectedFiles').style.display = 'block';
                const filesList = document.getElementById('filesList');
                filesList.innerHTML = '';
                
                files.forEach(file => {
                    const li = document.createElement('li');
                    li.className = 'file-item';
                    li.innerHTML = `
                        <div class="file-icon">📄</div>
                        <div class="file-info">
                            <div class="file-name">${file.name}</div>
                            <div class="file-desc">${(file.size / 1024).toFixed(1)} KB</div>
                        </div>
                    `;
                    filesList.appendChild(li);
                });
            }
        }

        function runExperiments() {
            const progress = document.getElementById('experimentProgress');
            const progressFill = document.getElementById('expProgressFill');
            const status = document.getElementById('expStatus');
            
            progress.style.display = 'block';
            
            let prog = 0;
            const interval = setInterval(() => {
                prog += Math.random() * 10;
                if (prog > 100) prog = 100;
                
                progressFill.style.width = prog + '%';
                
                if (prog >= 100) {
                    status.textContent = 'Experiments completed!';
                    status.className = 'status success';
                    document.getElementById('experimentResults').style.display = 'block';
                    clearInterval(interval);
                }
            }, 300);
        }

        // Add drag and drop functionality
        document.querySelectorAll('.upload-area').forEach(area => {
            area.addEventListener('dragover', (e) => {
                e.preventDefault();
                area.classList.add('dragover');
            });
            
            area.addEventListener('dragleave', (e) => {
                e.preventDefault();
                area.classList.remove('dragover');
            });
            
            area.addEventListener('drop', (e) => {
                e.preventDefault();
                area.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const fileInput = area.querySelector('input[type="file"]') || 
                                    area.parentElement.querySelector('input[type="file"]');
                    if (fileInput) {
                        fileInput.files = files;
                        fileInput.dispatchEvent(new Event('change'));
                    }
                }
            });
        });

        // Auto-generate output name from input file
        document.getElementById('graphFile').addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                const baseName = file.name.replace('.gr', '').replace('.txt', '');
                document.getElementById('outputName').value = baseName + '_index';
            }
        });

        // Real-time validation for node inputs
        function validateNodeInput(input) {
            const value = parseInt(input.value);
            if (value < 1) {
                input.style.borderColor = '#dc3545';
                input.style.backgroundColor = '#f8d7da';
            } else {
                input.style.borderColor = '#28a745';
                input.style.backgroundColor = '#d4edda';
            }
        }

        document.getElementById('sourceNode').addEventListener('input', function() {
            validateNodeInput(this);
        });

        document.getElementById('targetNode').addEventListener('input', function() {
            validateNodeInput(this);
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + Q for quick query
            if ((e.ctrlKey || e.metaKey) && e.key === 'q') {
                e.preventDefault();
                if (document.getElementById('query').classList.contains('active')) {
                    randomQuery();
                }
            }
            
            // Ctrl/Cmd + I for index creation
            if ((e.ctrlKey || e.metaKey) && e.key === 'i') {
                e.preventDefault();
                showTab('index');
                document.querySelector('[onclick="showTab(\'index\')"]').click();
            }
        });

        // Enhanced error handling and user feedback
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `status ${type}`;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.zIndex = '9999';
            notification.style.maxWidth = '300px';
            notification.style.animation = 'slideIn 0.3s ease';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add slide animations for notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize tooltips and help text
        function addTooltip(element, text) {
            element.addEventListener('mouseenter', function() {
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                tooltip.textContent = text;
                tooltip.style.cssText = `
                    position: absolute;
                    background: #2c3e50;
                    color: white;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 0.9rem;
                    z-index: 1000;
                    pointer-events: none;
                    white-space: nowrap;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                `;
                
                document.body.appendChild(tooltip);
                
                const rect = element.getBoundingClientRect();
                tooltip.style.left = rect.left + 'px';
                tooltip.style.top = (rect.top - tooltip.offsetHeight - 8) + 'px';
                
                element._tooltip = tooltip;
            });
            
            element.addEventListener('mouseleave', function() {
                if (element._tooltip) {
                    element._tooltip.remove();
                    element._tooltip = null;
                }
            });
        }

        // Add helpful tooltips
        document.addEventListener('DOMContentLoaded', function() {
            addTooltip(document.getElementById('balanceParam'), 
                'Lower values = faster queries but larger index size');
            
            const uploadAreas = document.querySelectorAll('.upload-area');
            uploadAreas.forEach(area => {
                addTooltip(area, 'Drag & drop files here or click to browse');
            });
        });

        // Local storage for user preferences (simulation)
        function saveUserPreferences() {
            const prefs = {
                lastBeta: document.getElementById('balanceParam').value,
                lastBetaValues: document.getElementById('betaValues').value
            };
            // In a real implementation, this would use localStorage
            console.log('Saving preferences:', prefs);
        }

        function loadUserPreferences() {
            // In a real implementation, this would load from localStorage
            const defaultPrefs = {
                lastBeta: '0.2',
                lastBetaValues: '0.1, 0.2, 0.3, 0.5'
            };
            
            if (document.getElementById('balanceParam')) {
                document.getElementById('balanceParam').value = defaultPrefs.lastBeta;
            }
            if (document.getElementById('betaValues')) {
                document.getElementById('betaValues').value = defaultPrefs.lastBetaValues;
            }
        }

        // Initialize preferences on page load
        document.addEventListener('DOMContentLoaded', loadUserPreferences);

        // Save preferences when values change
        document.getElementById('balanceParam').addEventListener('change', saveUserPreferences);
        document.getElementById('betaValues').addEventListener('change', saveUserPreferences);

        // Enhanced file validation
        function validateGraphFile(file) {
            const validExtensions = ['.gr', '.txt'];
            const extension = file.name.toLowerCase().substring(file.name.lastIndexOf('.'));
            
            if (!validExtensions.includes(extension)) {
                showNotification('Please select a .gr or .txt file', 'error');
                return false;
            }
            
            if (file.size > 100 * 1024 * 1024) { // 100MB limit
                showNotification('File size too large. Please select a file under 100MB', 'error');
                return false;
            }
            
            return true;
        }

        // Update file upload handlers with validation
        document.getElementById('graphFile').addEventListener('change', function() {
            const file = this.files[0];
            if (file && validateGraphFile(file)) {
                handleFileUpload(this);
                showNotification('Graph file loaded successfully', 'success');
            }
        });

        // Add loading states for better UX
        function setLoadingState(button, isLoading) {
            if (isLoading) {
                button.disabled = true;
                button.innerHTML = button.innerHTML.replace(/^[^ ]+ /, '⏳ ');
                button.style.opacity = '0.7';
            } else {
                button.disabled = false;
                button.innerHTML = button.innerHTML.replace('⏳', button.innerHTML.includes('Create') ? '🚀' : 
                    button.innerHTML.includes('Find') ? '⚡' : 
                    button.innerHTML.includes('Run') ? '🧪' : '🔧');
                button.style.opacity = '1';
            }
        }

        // Enhanced createIndex function with loading states
        const originalCreateIndex = createIndex;
        createIndex = function() {
            const button = event.target;
            const graphFile = document.getElementById('graphFile').files[0];
            const outputName = document.getElementById('outputName').value;
            
            if (!graphFile) {
                showNotification('Please select a graph file first', 'error');
                return;
            }
            
            if (!outputName.trim()) {
                showNotification('Please enter an output name', 'error');
                return;
            }
            
            setLoadingState(button, true);
            originalCreateIndex();
            
            // Reset button state after completion
            setTimeout(() => {
                setLoadingState(button, false);
                showNotification('Index created successfully!', 'success');
            }, 5000);
        };

        // Add copy-to-clipboard functionality for code blocks
        document.querySelectorAll('.code-block').forEach(block => {
            const copyButton = document.createElement('button');
            copyButton.textContent = '📋 Copy';
            copyButton.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: rgba(255,255,255,0.2);
                border: 1px solid rgba(255,255,255,0.3);
                color: white;
                padding: 5px 10px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 0.8rem;
            `;
            
            block.style.position = 'relative';
            block.appendChild(copyButton);
            
            copyButton.addEventListener('click', () => {
                navigator.clipboard.writeText(block.textContent.replace('📋 Copy', '').trim());
                copyButton.textContent = '✅ Copied!';
                setTimeout(() => copyButton.textContent = '📋 Copy', 2000);
            });
        });
    </script>
</body>
</html>